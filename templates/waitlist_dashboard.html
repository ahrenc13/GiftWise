<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@{{ handle }} - GiftWise Waitlist</title>
    <meta name="description" content="Your personal GiftWise waitlist dashboard. Track your position and share with friends.">

    <!-- Open Graph for social sharing -->
    <meta property="og:title" content="I'm #{{ position }} on the GiftWise waitlist!">
    <meta property="og:description" content="AI that finds the perfect gift by analyzing social media. Join the waitlist!">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://giftwise.fit/spot/@{{ handle }}">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
        }

        .card {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 40px 30px;
            margin-bottom: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .logo {
            font-size: 48px;
            margin-bottom: 10px;
        }

        h1 {
            font-size: 32px;
            color: #1a202c;
            margin-bottom: 8px;
        }

        .handle {
            font-size: 20px;
            color: #667eea;
            font-weight: 600;
        }

        .position-display {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 16px;
            padding: 30px;
            text-align: center;
            margin: 30px 0;
        }

        .position-number {
            font-size: 72px;
            font-weight: 700;
            line-height: 1;
            margin-bottom: 10px;
        }

        .position-label {
            font-size: 18px;
            opacity: 0.9;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 30px 0;
        }

        .stat-box {
            background: #f7fafc;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
        }

        .stat-value {
            font-size: 36px;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 14px;
            color: #4a5568;
        }

        .countdown {
            background: #fff5f5;
            border: 2px solid #feb2b2;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            margin: 20px 0;
        }

        .countdown-value {
            font-size: 42px;
            font-weight: 700;
            color: #c53030;
            margin-bottom: 5px;
        }

        .countdown-label {
            font-size: 16px;
            color: #742a2a;
        }

        .referral-section {
            margin-top: 30px;
        }

        .referral-section h3 {
            font-size: 20px;
            color: #1a202c;
            margin-bottom: 15px;
            text-align: center;
        }

        .referral-link-box {
            background: #f7fafc;
            border: 2px solid #667eea;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .referral-link {
            color: #667eea;
            font-weight: 600;
            font-size: 16px;
            word-break: break-all;
            display: block;
            margin-bottom: 10px;
        }

        .copy-button {
            width: 100%;
            background: #667eea;
            color: white;
            border: none;
            padding: 12px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s;
        }

        .copy-button:hover {
            background: #5568d3;
        }

        .copy-button:active {
            background: #4c51bf;
        }

        .share-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 20px;
        }

        .share-btn {
            padding: 12px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            text-decoration: none;
            color: white;
            text-align: center;
            transition: transform 0.2s;
        }

        .share-btn:hover {
            transform: scale(1.05);
        }

        .share-btn.twitter {
            background: #1da1f2;
        }

        .share-btn.instagram {
            background: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%);
        }

        .progress-bar-container {
            background: #e2e8f0;
            border-radius: 20px;
            height: 12px;
            margin: 20px 0 10px 0;
            overflow: hidden;
        }

        .progress-bar {
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            height: 100%;
            border-radius: 20px;
            transition: width 0.3s;
        }

        .progress-label {
            text-align: center;
            font-size: 14px;
            color: #4a5568;
            margin-bottom: 20px;
        }

        .footer {
            text-align: center;
            color: white;
            margin-top: 30px;
            font-size: 14px;
        }

        .footer a {
            color: white;
            text-decoration: underline;
        }

        @media (max-width: 600px) {
            .card {
                padding: 30px 20px;
            }

            h1 {
                font-size: 28px;
            }

            .position-number {
                font-size: 56px;
            }

            .stat-value {
                font-size: 28px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="card">
            <div class="header">
                <div class="logo">üéÅ</div>
                <h1>Your Waitlist Status</h1>
                <div class="handle">@{{ handle }}</div>
            </div>

            <div class="position-display">
                <div class="position-number">#{{ position }}</div>
                <div class="position-label">out of {{ total_signups }} on the waitlist</div>
            </div>

            <div class="progress-bar-container">
                <div class="progress-bar" style="width: {{ (position / total_signups * 100) if total_signups > 0 else 0 }}%"></div>
            </div>
            <div class="progress-label">You're in the top {{ "%.0f"|format((position / total_signups * 100) if total_signups > 0 else 0) }}%</div>

            <div class="stats-grid">
                <div class="stat-box">
                    <div class="stat-value">{{ referral_count }}</div>
                    <div class="stat-label">Referrals</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value">{{ days_remaining }}</div>
                    <div class="stat-label">Days to Launch</div>
                </div>
            </div>

            <div class="countdown">
                <div class="countdown-value">{{ days_remaining }}</div>
                <div class="countdown-label">Days Until Spring 2026 Launch</div>
            </div>

            <div class="referral-section">
                <h3>üöÄ Move Up The List</h3>
                <p style="text-align: center; color: #4a5568; font-size: 14px; margin-bottom: 20px;">
                    Share your referral link. Each signup moves you up!
                </p>

                <div class="referral-link-box">
                    <div class="referral-link" id="referralLink">https://giftwise.fit/beta?ref={{ handle }}</div>
                    <button class="copy-button" onclick="copyReferralLink()">Copy Link</button>
                </div>

                <div class="share-buttons">
                    <a href="#" class="share-btn twitter" id="twitterShare" target="_blank">Share on Twitter</a>
                    <a href="#" class="share-btn instagram" onclick="alert('Copy your referral link and share it in your Instagram bio or stories!'); return false;">Share on Instagram</a>
                </div>
            </div>
        </div>

        <div class="footer">
            <p><strong>GiftWise</strong> - Never Give a Bad Gift Again</p>
            <p style="margin-top: 10px;">
                <a href="/beta">Join the waitlist</a> ‚Ä¢
                <a href="/">Learn more</a>
            </p>
        </div>
    </div>

    <script>
        // Set up Twitter share button
        const shareText = encodeURIComponent("I'm #{{ position }} on the GiftWise waitlist! AI that finds perfect gifts by analyzing social media. Join me:");
        const referralUrl = encodeURIComponent('https://giftwise.fit/beta?ref={{ handle }}');
        document.getElementById('twitterShare').href = `https://twitter.com/intent/tweet?text=${shareText}&url=${referralUrl}`;

        // Copy referral link function
        function copyReferralLink() {
            const link = document.getElementById('referralLink').textContent;
            navigator.clipboard.writeText(link).then(() => {
                const button = document.querySelector('.copy-button');
                const originalText = button.textContent;
                button.textContent = '‚úì Copied!';
                button.style.background = '#48bb78';
                setTimeout(() => {
                    button.textContent = originalText;
                    button.style.background = '#667eea';
                }, 2000);
            }).catch(err => {
                alert('Failed to copy. Please copy manually: ' + link);
            });
        }

        // Auto-refresh every 60 seconds to show updated stats
        setTimeout(() => {
            location.reload();
        }, 60000);
    </script>
</body>
</html>
